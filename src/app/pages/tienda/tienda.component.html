<div class="container mt-5 fade-in">

  <!-- TÃ­tulo -->
  <h1 class="text-center text-primary fw-bold animate-slide mb-4">
    ğŸ›’ Nuestra ColecciÃ³n Retro
  </h1>

  <!-- SubtÃ­tulo -->
  <p class="text-center text-muted fs-5 mb-5">
    Explora y compra camisetas histÃ³ricas de tus equipos y jugadores favoritos. Â¡Filtra, ordena y encuentra la tuya!
  </p>

  <!-- Filtros -->
  <div class="row mt-4 p-3 bg-light rounded shadow-lg filtros-box">
    <h5 class="text-center text-success fw-bold mb-3">ğŸ¯ Filtrar Productos</h5>

    <div class="col-md-4 mb-3">
      <label class="fw-bold">âš½ Buscar por Equipo</label>
      <input [(ngModel)]="filtroEquipo" (input)="aplicarFiltros()" class="form-control" placeholder="Ejemplo: Barcelona">
    </div>

    <div class="col-md-4 mb-3">
      <label class="fw-bold">ğŸ“… Temporada</label>
      <input [(ngModel)]="filtroTemporada" (input)="aplicarFiltros()" class="form-control" placeholder="Ejemplo: 2006/2007">
    </div>

    <div class="col-md-4 mb-3">
      <label class="fw-bold">ğŸ’° Precio MÃ¡ximo: {{ filtroPrecio | currency:'EUR' }}</label>
      <input [(ngModel)]="filtroPrecio" (input)="aplicarFiltros()" type="range" min="10" max="200" step="10" class="form-range">
    </div>

    <div class="col-12 text-center mt-3">
      <button class="btn btn-outline-secondary btn-sm" (click)="resetFiltros()">ğŸ”„ Limpiar Filtros</button>
    </div>
  </div>

  <!-- Ordenamiento -->
  <div class="row mt-4">
    <div class="col-md-6 offset-md-3 text-center">
      <label class="fw-bold me-2">ğŸ”ƒ Ordenar por:</label>
      <select class="form-select" [(ngModel)]="orden" (change)="ordenarProductos()">
        <option value="precioAsc">Precio: Menor a Mayor</option>
        <option value="precioDesc">Precio: Mayor a Menor</option>
        <option value="nombre">Nombre (A-Z)</option>
      </select>
    </div>
  </div>

  <!-- InformaciÃ³n de resultados -->
  <div class="text-center mt-4 mb-2">
    <span class="badge bg-primary fs-6">ğŸ” Resultados: {{ productosFiltrados.length }}</span>
  </div>

  <!-- Vista de productos -->
  <div class="row mt-4">
    <div *ngFor="let producto of productosFiltrados" class="col-lg-3 col-md-4 col-sm-6 col-12 mb-4">
      <div class="card producto-card position-relative shadow-sm">
        <span *ngIf="producto.stock === 0" class="badge bg-danger sold-out">Agotado</span>
        
        <!-- Imagen -->
        <div class="producto-img-container">
          <img [src]="producto.imagen" class="producto-imagen" [alt]="producto.nombre">
        </div>

        <!-- Cuerpo -->
        <div class="card-body text-center d-flex flex-column">
          <h5 class="card-title">{{ producto.nombre }}</h5>
          <p class="text-muted mb-1">{{ producto.equipo }} - {{ producto.temporada }}</p>
          <p class="text-success fw-bold">{{ producto.precio | currency:'EUR' }}</p>
          
          <!-- Stock -->
          <p class="text-muted small">
            <i class="bi bi-box"></i> Stock disponible: {{ producto.stock }}
          </p>

          <!-- BotÃ³n de detalles -->
          <a [routerLink]="['/producto', producto.id]" class="btn btn-outline-primary mt-auto" [class.disabled]="producto.stock === 0">
            Ver Detalles
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Cuando no hay productos -->
  <div *ngIf="productosFiltrados.length === 0" class="text-center mt-4">
    <h4 class="text-danger">âŒ No se encontraron camisetas con esos filtros.</h4>
    <img src="assets/images/not-found.png" class="img-fluid mt-3" style="max-height: 200px;" alt="No hay resultados">
  </div>

<!-- Newsletter promocional -->
<section class="bg-dark text-white text-center p-4 mt-5 rounded shadow-lg newsletter">
  <h4>SuscrÃ­bete para recibir novedades</h4>
  <p>Ofertas especiales, lanzamientos y noticias sobre camisetas retro.</p>
  <form (submit)="suscribirse($event)" #formRef="ngForm" class="row justify-content-center">
    <div class="col-md-4">
      <input
        type="email"
        class="form-control mb-2"
        name="user_email"
        [(ngModel)]="email"
        placeholder="Tu correo electrÃ³nico"
        required
      />
    </div>
    <div class="col-md-2">
      <button class="btn btn-warning w-100" type="submit">Suscribirse</button>
    </div>
  </form>
  <div *ngIf="mensajeExito" class="mt-3 alert alert-success">
    âœ… {{ mensajeExito }}
  </div>
  <div *ngIf="mensajeError" class="mt-3 alert alert-danger">
    âŒ {{ mensajeError }}
  </div>
</section>


  <!-- Opiniones de clientes -->
  <section class="mt-5">
    <h2 class="text-center text-info mb-4">Lo que dicen nuestros clientes</h2>
    <div class="row">
      <div class="col-md-4" *ngFor="let opinion of opiniones">
        <div class="testimonial p-3 bg-light rounded shadow">
          <p class="fst-italic">"{{ opinion.texto }}"</p>
          <p class="fw-bold text-end mb-0">- {{ opinion.autor }}</p>
        </div>
      </div>
    </div>
  </section>

<!-- GalerÃ­a Retro-->
<section class="mt-5">
  <h2 class="text-center text-success">ğŸ“¸ GalerÃ­a Retro</h2>
  <div class="row justify-content-center mt-4 galeria-retro">
<div class="galeria-col" *ngFor="let galeria of imagenesGaleria">
      <div class="galeria-item">
        <img [src]="galeria" class="img-fluid galeria-img shadow-sm" alt="Camiseta retro">
      </div>
    </div>
  </div>
</section>


  <!-- Preguntas Frecuentes -->
  <section class="mt-5">
    <h2 class="text-center text-warning">â“ Preguntas Frecuentes</h2>
    <div class="accordion mt-4" id="faqTienda">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
            Â¿QuÃ© mÃ©todos de pago aceptan?
          </button>
        </h2>
        <div id="faq1" class="accordion-collapse collapse show">
          <div class="accordion-body">
            Aceptamos tarjetas de crÃ©dito/dÃ©bito, PayPal y Bizum.
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
            Â¿Puedo devolver una camiseta personalizada?
          </button>
        </h2>
        <div id="faq2" class="accordion-collapse collapse">
          <div class="accordion-body">
            No se aceptan devoluciones de productos personalizados, excepto en caso de error de fabricaciÃ³n.
          </div>
        </div>
      </div>
    </div>
  </section>

</div>
